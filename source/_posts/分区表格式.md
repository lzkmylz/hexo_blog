---
title: 分区表格式
date: 2019-07-10 17:26:05
tags: ['奇奇怪怪的问题']
---

今天被派去给一台服务器上装Windows Server 2012 R2，先是做了Raid 5，然后在安装系统时遇到了问题——无法完成分区。服务器硬盘有8块8T的机械硬盘，做完Raid 5之后还有50T，但是分区时只能分出2T的空间。google了一下，发现是分区表格式的问题。

目前主流的硬盘分区表格式有2种，分别是MBR和GPT，使用MBR格式时，最大只支持单个硬盘完成2TB的分区，因此在服务器上需要把硬盘重设为GPT格式分区。

在Windows Server安装界面下按`Shift + F10`即可打开命令行，输入以下命令进行格式转换：

```
diskpart
list disk
select disk 0
convert disk gpt
```

然后遇到了另一个问题，就是GPT分区下无法安装Windows（反正2012 R2这个不行），最后只好将一块硬盘单独拿出来做Raid 0并用MBR分区做2个T拿来装系统，剩下的部分做Raid5并转GPT。最后浪费来大概5T的硬盘空间，不过至少还能用了。